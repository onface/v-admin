<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>v-admin</title>
    <script src="https://unpkg.com/jquery@1.12.4/dist/jquery.js" ></script>
    <script src="https://unpkg.com/vue@2" ></script>
    <script src="https://unpkg.com/iview@2/dist/iview.min.js"></script>
    <script src="./v-admin.js" ></script>
    <link rel="stylesheet" href="https://unpkg.com/iview@2/dist/styles/iview.css" />
    <link rel="stylesheet" href="./v-admin.css">
</head>
<body>
    <div id="app" style="padding:20px;" >
        <h1>点击按钮触发AJAX</h1>
        <code>&lt;v-ajax&gt;&lt;/v-ajax&gt;</code>
        <h2>成功</h2>
        <v-ajax
            url="/mock/ok.json"
            type="get"
            data="id=1"
        >
            <i-button type="success" >成功</i-button>
        </v-ajax>
        <pre>{"status": "success"} // ok.json </pre>
        <v-ajax
            url="/mock/ok-msg.json"
            type="get"
        >
            <i-button type="success">控制成功消息</i-button>
        </v-ajax>
        <pre>{"status": "success", "msg": "成功发送12条短信到客户手机"} // ok-msg.json </pre>
        <h2>跳转页面</h2>
        <v-ajax
            url="/mock/ok-jump.json"
            type="get"
        >
            <i-button type="success" >成功后跳转页面</i-button>
        </v-ajax>
        <pre>{"status": "success", "data": {"jump": "/"}} // ok-jump.json</pre>
        <v-ajax
            url="/mock/ok-jump-delay.json"
            type="get"
        >
            <i-button type="success" >延迟跳转页面</i-button>
        </v-ajax>
        <pre>{"status": "success", "data": {"jump": "/", "jumpDelay": 2000}} // ok-jump-delay.json</pre>
        <v-ajax
            url="/mock/ok-jump-refresh.json"
            type="get"
        >
            <i-button type="success" >成功后刷新页面</i-button>
        </v-ajax>
        <pre>{"status": "success","data": {"jump": "refresh"}} // ok-jump-refresh.json</pre>
        <h2>data</h2>
        <v-ajax
            url="/mock/ok.json"
            type="get"
            data='{"id":1}'
        >
            <i-button type="info" >data=JSON</i-button>
        </v-ajax>
        <v-ajax
            url="/mock/ok.json"
            type="get"
            data='{"id":1'
        >
            <i-button type="info">JSON格式错误将会报错</i-button>
        </v-ajax>
        <h2>失败</h2>
        <v-ajax
            url="/mock/error.json"
            type="get"
            data='id=1'
        >
            <i-button type="error" >失败</i-button>
        </v-ajax>
        <pre>{"status": "error","msg": "错误消息"} // error.json</pre>
        <h2>确认操作</h2>
        <v-ajax
            url="/mock/ok.json"
            type="get"
            confirm="确认删除？"
        >
            <i-button >操作</i-button>
        </v-ajax>
        <div class="js-demo" >
            <h2>删除</h2>
            <v-ajax
                url="/mock/ok.json"
                type="get"
                remove="closest&.js-demo"
            >
                <i-button >删除</i-button>
            </v-ajax>
        </div>
        <h2>自定义成功处理 - 面向前端开发人员</h2>
         <v-ajax
             url="/mock/ok.json"
             type="get"
             v-on:success="customSuccess"
         >
             <i-button>回调succes</i-button>
         </v-ajax>
    </div>


<script>
window.a = new Vue({
    el: '#app',
    methods: {
        customSuccess: function (defaultAction) {
            vAdmin.Message.info('do somethings')
            // defaultAction()
        }
    },
    data: function () {
        return {

        }
    }
})
</script>
</body>
</html>
