<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>v-admin</title>
    <script src="https://unpkg.com/jquery@1.12.4/dist/jquery.js" ></script>
    <script src="https://unpkg.com/vue@2" ></script>
    <script src="https://unpkg.com/iview@2/dist/iview.min.js"></script>
    <script src="./v-admin.js" ></script>
    <link rel="stylesheet" href="https://unpkg.com/iview@2/dist/styles/iview.css" />
    <link rel="stylesheet" href="./v-admin.css">
    <style>
    /* 登录界面专用样式 */
    html {
        background: url(https://picsum.photos/1200/800/?image=987) no-repeat;
        background-size: 100%;
    }
    body {
        background: none;
    }
    </style>
</head>
<body>
    <div id="app" style="padding:20px;" >
        <div style="width:300px;margin-top:16%;margin-left:auto;margin-right:auto;" >
           <!-- <h1 style="text-align:center;" >datasuv</h1> -->
           <img
               src="http://7xpzm0.com2.z0.glb.qiniucdn.com/20170518164104_7451495096864.png"
               style="width:140px;display:block;margin:0 auto;margin-bottom:10px;"
           />
           <div style="color:#333;text-align:center;line-height:2;padding-top:1em;padding-bottom:1em;" >
               <h6>今天，我们对你的营销效果负责</h6>
               <p>DataSuv专注于多渠道数字营销Saas技术服务提供商</p>
           </div>
           <v-form
               method="post"
               action="/login"
               id="mainForm"
           >
               <i-input
                   name="mobile"
                   placeholder="手机号"
                   style="width: 100%;margin-bottom:10px;"
               >
                   <i-button slot="prepend" icon="android-phone-portrait"></i-button>
               </i-input>
               <row>
                   <i-col span="16" >
                       <i-input
                           name="code"
                           type="text"
                           placeholder="图形码"
                           style="width: 100%;margin-bottom:10px;"
                       >
                           <i-button slot="prepend" icon="image"></i-button>
                       </i-input>
                   </i-col>
                   <i-col span="1" >
                       &nbsp;
                   </i-col>
                   <i-col span="7" >
                       <img
                           src="https://dummyimage.com/200x100/FFF&text=sfu2"
                           onclick="javascript:this.src='/verify?t=' + Math.random();"
                           style="width:100%;height:32px;border-radius:3px;margin-top:1px;"
                       />
                   </i-co>
               </row>
               <row>
                   <i-col span="16" >
                       <i-input
                           name="sms_code"
                           type="text"
                           placeholder="短信验证码"
                           style="width: 100%;margin-bottom:10px;"
                       >
                           <i-button slot="prepend" icon="android-textsms"></i-button>
                       </i-input>
                   </i-col>
                   <i-col span="1" >
                       &nbsp;
                   </i-col>
                   <i-col span="7" >
                       <i-button
                           style="width:100%;"
                           id="sendSMS"
                       >
                       发送短信
                       </i-button>
                   </i-co>
               </row>
               <i-input
                   name="password"
                   type="password"
                   placeholder="密码"
                   style="width: 100%;margin-bottom:10px;"
               >
                   <i-button slot="prepend" icon="locked"></i-button>
               </i-input>
                <i-button
                    html-type="submit"
                    type="primary"
                    style="width:100%;"
                >登录</i-button>
            </v-form>
        </div>
    </div>
<script>
new Vue({
    el: '#app',
    data: function () {
        return {

        }
    }
})
$(function () {
    var busy = false
    $('#sendSMS').on('click', function () {
        if (busy) {
            return
        }
        $.ajax({
            type: 'post',
            url: '/sms',
            data: $('#mainForm').serializeArray(),
            dataType: 'json'
        }).done(function (res){
            if (res.status === 'success') {
                alert('发送成功')
            }
            else {
                alert(res.msg)
            }
        }).always(function () {
            busy = false
        })
    })
})
</script>
</body>
</html>
